

var isCheckAllSubmitBtnInitialized = false;
document.addEventListener('DOMContentLoaded', deleteCheckedBoxes);

function deleteCheckedBoxes() {
    var deleteAllForm = document.forms['deleteAll-form'];
    var checkboxAll = document.querySelector('#checkbox-all');
    var orderIdCheckboxes = document.querySelectorAll('input[name="Ids[]"]');
    var checkAllSubmitBtn = document.querySelector('.check-all-submit-btn');
    // Checkbox all clicked
    checkboxAll.addEventListener('change', function () {
        var isCheckedAll = this.checked;
        for (var i = 0; i < orderIdCheckboxes.length; i++) {
            orderIdCheckboxes[i].checked = isCheckedAll;
        }
        renderCheckAllSubmitBtn();
    });
    // Order item checkbox changed
    for (var i = 0; i < orderIdCheckboxes.length; i++) {
        orderIdCheckboxes[i].addEventListener('change', function () {
            var isCheckedAll = document.querySelectorAll('input[name="Ids[]"]:checked').length === orderIdCheckboxes.length;
            checkboxAll.checked = isCheckedAll;
            renderCheckAllSubmitBtn();
        });
    }

    // Check all submit button clicked
    if (!isCheckAllSubmitBtnInitialized) {
        checkAllSubmitBtn.addEventListener('click', function (event) {
            var isSubmittable = !this.classList.contains('disabled');
            if (isSubmittable) {
                var check = confirm("Do you want to delete this!!!");
                if (check) {
                    deleteAllForm.submit();
                } else {
                    console.log("cancel submit");
                    event.preventDefault();
                }
            }
        });
        isCheckAllSubmitBtnInitialized = true;
    }

    // Re-render check all submit button
    function renderCheckAllSubmitBtn() {
        var checkedCount = document.querySelectorAll('input[name="Ids[]"]:checked').length;
        if (checkedCount > 0) {
            checkAllSubmitBtn.classList.remove('disabled');
        } else {
            checkAllSubmitBtn.classList.add('disabled');
        }
    }
}

//document.addEventListener('DOMContentLoaded', function () {
//    var deleteAllForm = document.forms['deleteAll-form'];
//    var checkboxAll = document.querySelector('#checkbox-all');
//    var orderIdCheckboxes = document.querySelectorAll('input[name="Ids[]"]');
//    var checkAllSubmitBtn = document.querySelector('.check-all-submit-btn');
//    // Checkbox all clicked
//    checkboxAll.addEventListener('change', function () {
//        var isCheckedAll = this.checked;
//        for (var i = 0; i < orderIdCheckboxes.length; i++) {
//            orderIdCheckboxes[i].checked = isCheckedAll;
//        }
//        renderCheckAllSubmitBtn();
//    });
//    // Order item checkbox changed
//    for (var i = 0; i < orderIdCheckboxes.length; i++) {
//        orderIdCheckboxes[i].addEventListener('change', function () {
//            var isCheckedAll = document.querySelectorAll('input[name="Ids[]"]:checked').length === orderIdCheckboxes.length;
//            checkboxAll.checked = isCheckedAll;
//            renderCheckAllSubmitBtn();
//        });
//    }
//    // Check all submit button clicked
//    checkAllSubmitBtn.addEventListener('click', function (e) {
//        e.preventDefault();
//        var isSubmittable = !this.classList.contains('disabled');
//        if (isSubmittable && confirm("Do you want to delete this!!!")) {
//            deleteAllForm.submit();
//        } else {
//            console.log("cancel submit");
//        }
//    });
//    // Re-render check all submit button
//    function renderCheckAllSubmitBtn() {
//        var checkedCount = document.querySelectorAll('input[name="Ids[]"]:checked').length;
//        if (checkedCount > 0) {
//            checkAllSubmitBtn.classList.remove('disabled');
//        } else {
//            checkAllSubmitBtn.classList.add('disabled');
//        }
//    }
//});
